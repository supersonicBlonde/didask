{"version":3,"file":"scripts.min.js","sources":["scripts.min.js"],"sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nvar UID = {\n  _current: 0,\n  getNew: function getNew() {\n    this._current++;\n    return this._current;\n  }\n};\n\nHTMLElement.prototype.pseudoStyle = function (element, prop, value) {\n  var _this = this;\n\n  var _sheetId = \"pseudoStyles\";\n\n  var _head = document.head || document.getElementsByTagName('head')[0];\n\n  var _sheet = document.getElementById(_sheetId) || document.createElement('style');\n\n  _sheet.id = _sheetId;\n  var className = \"pseudoStyle\" + UID.getNew();\n  _this.className += \" \" + className;\n  _sheet.innerHTML += \" .\" + className + \":\" + element + \"{\" + prop + \":\" + value + \"}\";\n\n  _head.appendChild(_sheet);\n\n  return this;\n};\n/**********************************************************************************/\n\n\nfunction set_preloader(state) {\n  if (state == true) {\n    var preloader = document.createElement('div');\n    preloader.setAttribute('id', 'preloader');\n    preloader.innerHTML = '<img src=\"/wp-content/themes/didask/img/loader.gif\">';\n    document.body.appendChild(preloader);\n  } else {\n    document.getElementById(\"preloader\").remove();\n  }\n}\n\nfunction set_overlay(state) {\n  var overlay = document.getElementById('overlay');\n  var scale = document.querySelector('.scale');\n\n  if (state === true) {\n    overlay.classList.add('show');\n    overlay.classList.remove('hide');\n    scale.classList.add('scaleOut');\n    scale.classList.remove('scaleIn');\n  } else {\n    overlay.classList.remove('show');\n    overlay.classList.add('hide');\n    scale.classList.add('scaleIn');\n    scale.classList.remove('scaleOut');\n  }\n}\n\nfunction get_index(elt, ar) {\n  return Array.prototype.indexOf.call(ar, elt);\n}\n\nfunction remove_all_modules(ar_episodes, ar_blocs) {\n  ar_blocs.forEach(function (item) {\n    item.style.display = \"none\";\n  });\n  ar_episodes.forEach(function (item) {\n    item.classList.remove('selected');\n  });\n}\n\nfunction close() {\n  var ar_blocs = document.querySelectorAll('.content-episode-container');\n  remove_all_modules(ar, ar_blocs);\n}\n\nfunction save_progression(index, id_parcours, id_episode) {\n  jQuery.ajax({\n    url: ajax_js_obj.ajax_url,\n    beforeSend: function beforeSend(xhr) {\n      set_overlay(true);\n      set_preloader(true);\n    },\n    dataType: 'json',\n    type: 'post',\n    data: {\n      item_index: index,\n      action: 'save_tracking',\n      episode: id_episode,\n      parcours: id_parcours,\n      submitted_nonce: ajax_js_obj.the_nonce\n    },\n    success: function success(response) {\n      if (response['insert'] === 1) {\n        set_overlay(false);\n        set_preloader(false);\n        var _index = response['index'];\n\n        var _ar = document.querySelectorAll('.save-section');\n\n        var episode_ar = document.querySelectorAll('.episode-item');\n        _ar[_index].innerHTML = '<div class=\"text-uppercase pb-2 success\"><span class=\"bravo\">BRAVO</span>Votre équipe a terminé cet épisode.</div><div ><a href=\"#\" class=\"cancel-track\">Annuler</a></div>';\n\n        var cb_container = episode_ar[_index].querySelector('.checkbox-discover');\n\n        cb_container.querySelector('input').checked = true;\n        cb_container.querySelector('label').innerHTML = \"Terminé\";\n\n        if (response['completed'] == 1) {\n          var parcours_secondaire = document.getElementById('parcours-secondaire');\n          parcours_secondaire.style.display = 'block';\n          parcours_secondaire.scrollIntoView();\n        } //update_progress_bar();\n\n      }\n    },\n    complete: function complete(data) {//document.getElementById('preloader').classList.add('hide');\n    },\n    error: function error(response) {\n      console.log('Error retrieving the information: ' + response.status + ' ' + response.statusText); //console.log( response );\n    }\n  });\n}\n\nfunction cancel_progression(index, id_parcours, id_episode) {\n  jQuery.ajax({\n    url: ajax_js_obj.ajax_url,\n    beforeSend: function beforeSend(xhr) {\n      set_overlay(true);\n      set_preloader(true);\n    },\n    dataType: 'json',\n    type: 'post',\n    data: {\n      item_index: index,\n      action: 'cancel_tracking',\n      episode: id_episode,\n      parcours: id_parcours,\n      submitted_nonce: ajax_js_obj.the_nonce\n    },\n    success: function success(response) {\n      console.log(response);\n\n      if (response['update'] === 1) {\n        set_overlay(false);\n        set_preloader(false);\n        var _index2 = response['index'];\n\n        var _ar2 = document.querySelectorAll('.save-section');\n\n        var episode_ar = document.querySelectorAll('.episode-item');\n        _ar2[_index2].innerHTML = '<div class=\"text-uppercase pb-2\">Vous avez terminé ?</div><div class=\"default-btn btn-invert\"><a href=\"/\" class=\"track-btn\">Cliquez ici pour l`\\'enregistrer</a></div>';\n\n        var cb_container = episode_ar[_index2].querySelector('.checkbox-discover');\n\n        cb_container.querySelector('input').checked = true;\n        cb_container.querySelector('label').innerHTML = \"Terminé\"; //update_progress_bar();\n      }\n    },\n    complete: function complete(data) {//document.getElementById('preloader').classList.add('hide');\n    },\n    error: function error(response) {\n      console.log('Error retrieving the information: ' + response.status + ' ' + response.statusText); //console.log( response );\n    }\n  });\n}\n\nfunction navbarAnimate(el) {\n  el.animate([// keyframes\n\n  /*{ height: 0, 'opacity': 0 }, \r\n  { height: '80vh', 'opacity': 1 }*/\n  {\n    'opacity': 0\n  }, {\n    'opacity': 1\n  }], {\n    // timing options\n    duration: 800,\n    easing: 'ease-out',\n    iterations: 1\n  });\n}\n\nvar callback = function callback() {\n  //****************************************\n  // MENU HAMBURGER\n  //****************************************\n\n  /*let toggler = document.querySelector('.navbar-toggler');\r\n  let collapse = document.getElementById('navbarNav');\r\n  \n  \n  toggler.addEventListener('click' , function(event) {\r\n  \tif (collapse.classList.contains('show')) {\r\n     \t\tcollapse.classList.remove('show'); \r\n     \t\tdocument.getElementById('header-container').classList.remove('open');\r\n  \t}\r\n  \telse {\r\n  \t\tcollapse.classList.add('show');\r\n  \t\tdocument.getElementById('header-container').classList.add('open');\r\n  \t\tnavbarAnimate(collapse);\r\n  \t}\r\n  });*/\n\n  /******************************************/\n  var ar = document.querySelectorAll('.episode-item');\n  var ar_blocs = document.querySelectorAll('.content-episode-container');\n  var parent_node = document.querySelector('.episodes-list');\n  document.querySelectorAll('.episode-item').forEach(function (item) {\n    item.addEventListener('click', function (event) {\n      remove_all_modules(ar, ar_blocs);\n      item.classList.add('selected');\n      var colored = item.querySelector('.colored');\n      var color = colored.dataset.color;\n      colored.pseudoStyle(\"after\", \"border-top-color\", color + '!important');\n      var pos = get_index(item, ar);\n      ar_blocs[pos].style.display = \"block\";\n\n      if (pos < 3) {\n        parent_node.insertBefore(ar_blocs[pos], ar[3]);\n        /*for(let i = 3; i < 6 ; i++){\r\n        \tar[i].style.top = ar_blocs[i].offsetHeight+\"px\"; \r\n         \t} */\n      }\n    });\n  });\n  /* document.querySelectorAll(\".cancel-track a\").forEach(item => {\r\n    \titem.addEventListener('click' , event => {\r\n    \t\t\r\n    \t\tif(!confirm(\"Etes-vous sûr de vouloir annuler ?\")) \r\n    \t\t\treturn;\r\n    \t\tevent.preventDefault();\r\n    \t\tlet ar = document.querySelectorAll('.save-section');\r\n    \t\tlet parent = item.parentNode.parentNode;\r\n    \t    let pos = get_index(parent, ar); \r\n    \t\tlet id_parcours = parent.dataset.parcours;\r\n    \t\tlet id_episode = parent.dataset.episode;\r\n    \t\tconsole.log(id_parcours , id_episode);\r\n    \t\tcancel_progression(pos, id_parcours , id_episode);\r\n    \t})\r\n    });\r\n  */\n\n  /*document.querySelectorAll(\".track-btn\").forEach(item => {\r\n  \titem.addEventListener('click' , event => {\r\n  \t\tconsole.log(\"track\");\r\n  \t\tevent.preventDefault(); \r\n  \t\tlet ar = document.querySelectorAll('.save-section');\r\n  \t\tlet parent = item.parentNode.parentNode;\r\n  \t    let pos = get_index(parent, ar); \r\n  \t\tlet id_parcours = item.dataset.parcours;\r\n  \t\tlet id_episode = item.dataset.episode;\r\n  \t\t\r\n  \t\tsave_progression(pos, id_parcours , id_episode);\r\n    \t})\r\n  })*/\n\n  document.querySelectorAll(\".save-section\").forEach(function (item) {\n    var ar = document.querySelectorAll('.save-section');\n    item.addEventListener('click', function (event) {\n      event.preventDefault();\n\n      if (event.target.className == \"track-btn\") {\n        console.log(item);\n        var pos = get_index(item, ar);\n        var id_parcours = item.dataset.parcours;\n        var id_episode = item.dataset.episode;\n        save_progression(pos, id_parcours, id_episode);\n      } else if (event.target.className == \"cancel-track\") {\n        if (!confirm(\"Etes-vous sûr de vouloir annuler ?\")) return;\n        /*let ar = document.querySelectorAll('.save-section');*/\n\n        var _pos = get_index(item, ar);\n\n        var _id_parcours = item.dataset.parcours;\n        var _id_episode = item.dataset.episode;\n        console.log(_id_parcours, _id_episode);\n        cancel_progression(_pos, _id_parcours, _id_episode);\n      }\n    });\n  });\n};\n\nif (document.readyState === \"complete\" || document.readyState !== \"loading\" && !document.documentElement.doScroll) {\n  callback();\n} else {\n  document.addEventListener(\"DOMContentLoaded\", callback);\n}\n\n},{}]},{},[1]);\n"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","UID","_current","getNew","this","set_preloader","state","preloader","document","createElement","setAttribute","innerHTML","body","appendChild","getElementById","remove","set_overlay","overlay","scale","querySelector","classList","add","get_index","elt","ar","Array","prototype","indexOf","remove_all_modules","ar_episodes","ar_blocs","forEach","item","style","display","HTMLElement","pseudoStyle","element","prop","value","_sheetId","_head","head","getElementsByTagName","_sheet","id","className","callback","querySelectorAll","parent_node","addEventListener","event","colored","color","dataset","pos","insertBefore","preventDefault","target","console","log","id_parcours","parcours","id_episode","episode","index","jQuery","ajax","url","ajax_js_obj","ajax_url","beforeSend","dataType","type","data","item_index","action","submitted_nonce","the_nonce","success","response","_index","_ar","episode_ar","cb_container","parcours_secondaire","checked","scrollIntoView","complete","error","status","statusText","confirm","_pos","_id_parcours","_id_episode","_index2","_ar2","readyState","documentElement","doScroll"],"mappings":"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"}