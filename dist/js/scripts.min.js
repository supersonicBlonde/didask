!function c(a,s,i){function l(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=s[t]={exports:{}};a[t][0].call(n.exports,function(e){return l(a[t][1][e]||e)},n,n.exports,c,a,s,i)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,o){"use strict";var s={_current:0,getNew:function(){return this._current++,this._current}};function c(e){var t;1==e?((t=document.createElement("div")).setAttribute("id","preloader"),t.innerHTML='<img src="/wp-content/themes/didask/img/loader.gif">',document.body.appendChild(t)):document.getElementById("preloader").remove()}function a(e){var t=document.getElementById("overlay"),o=document.querySelector(".scale");!0===e?(t.classList.add("show"),t.classList.remove("hide"),o.classList.add("scaleOut"),o.classList.remove("scaleIn")):(t.classList.remove("show"),t.classList.add("hide"),o.classList.add("scaleIn"),o.classList.remove("scaleOut"))}function m(e,t){return Array.prototype.indexOf.call(t,e)}function v(e,t,o){jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){a(!0),c(!0)},dataType:"json",type:"post",data:{item_index:e,action:"save_tracking",episode:o,parcours:t,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,o,r,n;1===e.insert&&(console.log("response.ok"),a(!1),c(!1),t=e.id_episode,o=document.querySelector("[data-episode_saved = '"+t+"']"),r=document.querySelector("[data-episode = '"+t+"']").querySelector(".checkbox-discover"),o.innerHTML='<div class="text-uppercase pb-2 success"><span class="bravo">BRAVO</span>Votre équipe a terminé cet épisode.</div><div ><a href="#" class="cancel-track">Annuler</a></div>',r.querySelector("input").checked=!0,r.querySelector("label").innerHTML="Terminé",1==e.completed&&((n=document.getElementById("parcours-secondaire")).style.display="block",n.scrollIntoView()))},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}function f(e,t,o){jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){a(!0),c(!0)},dataType:"json",type:"post",data:{item_index:e,action:"cancel_tracking",episode:o,parcours:t,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,o,r;1===e.update&&(console.log("update.ok"),a(!1),c(!1),t=e.id_episode,o=document.querySelector("[data-episode_saved = '"+t+"']"),r=document.querySelector("[data-episode = '"+t+"']").querySelector(".checkbox-discover"),o.innerHTML='<div class="text-uppercase pb-2">Vous avez terminé ?</div><div class="default-btn btn-invert"><a href="/" class="track-btn">Cliquez ici pour l`\'enregistrer</a></div>',r.querySelector("input").checked=!1,r.querySelector("label").innerHTML="A découvrir")},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}HTMLElement.prototype.pseudoStyle=function(e,t,o){var r="pseudoStyles",n=document.head||document.getElementsByTagName("head")[0],c=document.getElementById(r)||document.createElement("style");c.id=r;var a="pseudoStyle"+s.getNew();return this.className+=" "+a,c.innerHTML+=" ."+a+":"+e+"{"+t+":"+o+"}",n.appendChild(c),this};function r(){var u=document.querySelectorAll(".episode-item"),p=document.querySelectorAll(".content-episode-container");document.querySelectorAll(".episode-item").forEach(function(d){d.addEventListener("click",function(e){var t=d.parentElement,o=t.nextElementSibling,r=t.querySelectorAll(".episode-item"),n=o.querySelectorAll(".content-episode-container");!function(e,t){t.forEach(function(e){e.style.display="none"});var o=document.querySelector(".episodes-list .content-episode-container");null!=o&&o.remove(),e.forEach(function(e){e.classList.remove("selected")})}(u,p),d.classList.add("selected");var c=d.querySelector(".colored"),a=c.dataset.color;c.pseudoStyle("after","border-top-color",a+"!important");var s=m(d,r);console.log("pos",s);var i,l=t.childElementCount;console.log("count children",l),3<l&&s<3?(i=n[s].cloneNode(!0),console.log(i),i.style.display="block",t.insertBefore(i,r[3]),document.querySelectorAll(".save-section"),i.querySelector(".save-section").addEventListener("click",function(e){e.preventDefault();var t=e.target.parentElement.parentElement;if("track-btn"==e.target.className){var o=t.dataset.parcours,r=t.dataset.episode_saved;console.log("track pos",s,"parcours",o,"episode",r),v(s,o,r)}else if("cancel-track"==e.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var n=t.dataset.parcours,c=t.dataset.episode_saved;console.log("cancel pos",s,"parcours",n,"episode",c),f(s,n,c)}})):n[s].style.display="block"})}),document.querySelectorAll(".save-section").forEach(function(s){var i=document.querySelectorAll(".save-section");s.addEventListener("click",function(e){if(e.preventDefault(),"track-btn"==e.target.className){var t=m(s,i),o=s.dataset.parcours,r=s.dataset.episode_saved;console.log("track pos",t,"parcours",o,"episode",r),v(t,o,r)}else if("cancel-track"==e.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var n=m(s,i),c=s.dataset.parcours,a=s.dataset.episode_saved;console.log("cancel pos",n,"parcours",c,"episode",a),f(n,c,a)}})})}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?r():document.addEventListener("DOMContentLoaded",r)},{}]},{},[1]);
//# sourceMappingURL=scripts.min.js.map
