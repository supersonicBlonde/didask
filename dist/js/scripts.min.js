!function s(a,c,i){function l(t,e){if(!c[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=c[t]={exports:{}};a[t][0].call(r.exports,function(e){return l(a[t][1][e]||e)},r,r.exports,s,a,c,i)}return c[t].exports}for(var d="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,o){"use strict";function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a,p,f){function m(e,t){return q(e)===t}function y(e){return"function"!=typeof p.createElement?p.createElement(e):g?p.createElementNS.call(p,"http://www.w3.org/2000/svg",e):p.createElement.apply(p,arguments)}function c(e,t,o){var n;for(var r in e)if(e[r]in t)return!1===o?e[r]:m(n=t[e[r]],"function")?function(e,t){return function(){return e.apply(t,arguments)}}(n,o||t):n;return!1}function r(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function s(e,t,o,n){var r,s,a,c,i,l="modernizr",d=y("div"),u=((i=p.body)||((i=y(g?"svg":"body")).fake=!0),i);if(parseInt(o,10))for(;o--;)(a=y("div")).id=n?n[o]:l+(o+1),d.appendChild(a);return(r=y("style")).type="text/css",r.id="s"+l,(u.fake?u:d).appendChild(r),u.appendChild(d),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(p.createTextNode(e)),d.id=l,u.fake&&(u.style.background="",u.style.overflow="hidden",c=h.style.overflow,h.style.overflow="hidden",h.appendChild(u)),s=t(d,e),u.fake?(u.parentNode.removeChild(u),h.style.overflow=c,h.offsetHeight):d.parentNode.removeChild(d),!!s}function v(e,t){var o=e.length;if("CSS"in a&&"supports"in a.CSS){for(;o--;)if(a.CSS.supports(r(e[o]),t))return!0;return!1}if("CSSSupportsRule"in a){for(var n=[];o--;)n.push("("+r(e[o])+":"+t+")");return s("@supports ("+(n=n.join(" or "))+") { #modernizr { position: absolute; } }",function(e){return"absolute"==(t=e,o=null,n="position","getComputedStyle"in a?(r=getComputedStyle.call(a,t,o),s=a.console,null!==r?n&&(r=r.getPropertyValue(n)):s&&s[s.error?"error":"log"].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")):r=!o&&t.currentStyle&&t.currentStyle[n],r);var t,o,n,r,s})}return f}function n(e,t,o,n,r){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+u.join(s+" ")+s).split(" ");return m(t,"string")||m(t,"undefined")?function(e,t,o,n){function r(){a&&(delete w.style,delete w.modElem)}if(n=!m(n,"undefined")&&n,!m(o,"undefined")){var s=v(e,o);if(!m(s,"undefined"))return s}for(var a,c,i,l,d,u=["modernizr","tspan","samp"];!w.style&&u.length;)a=!0,w.modElem=y(u.shift()),w.style=w.modElem.style;for(i=e.length,c=0;c<i;c++)if(l=e[c],d=w.style[l],~(""+l).indexOf("-")&&(l=l.replace(/([a-z])-([a-z])/g,function(e,t,o){return t+o.toUpperCase()}).replace(/^-/,"")),w.style[l]!==f){if(n||m(o,"undefined"))return r(),"pfx"!=t||l;try{w.style[l]=o}catch(e){}if(w.style[l]!=d)return r(),"pfx"!=t||l}return r(),!1}(a,t,n,r):c(a=(e+" "+_.join(s+" ")+s).split(" "),t,o)}function e(e,t,o){return n(e,f,f,t,o)}var i=[],l=[],t={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var o=this;setTimeout(function(){t(o[e])},0)},addTest:function(e,t,o){l.push({name:e,fn:t,options:o})},addAsyncTest:function(e){l.push({name:null,fn:e})}},d=function(){};d.prototype=t,d=new d;var h=p.documentElement,g="svg"===h.nodeName.toLowerCase(),o="Moz O ms Webkit",u=t._config.usePrefixes?o.split(" "):[];t._cssomPrefixes=u;var _=t._config.usePrefixes?o.toLowerCase().split(" "):[];t._domPrefixes=_;var b={elem:y("modernizr")};d._q.push(function(){delete b.elem});var x,S,E,j,w={style:b.elem.style};d._q.unshift(function(){delete w.style}),t.testAllProps=n,t.testAllProps=e,d.addTest("flexbox",e("flexBasis","1px",!0)),d.addTest("flexboxlegacy",e("boxDirection","reverse",!0)),function(){var e,t,o,n,r,s;for(var a in l)if(l.hasOwnProperty(a)){if(e=[],(t=l[a]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(o=0;o<t.options.aliases.length;o++)e.push(t.options.aliases[o].toLowerCase());for(n=m(t.fn,"function")?t.fn():t.fn,r=0;r<e.length;r++)1===(s=e[r].split(".")).length?d[s[0]]=n:(!d[s[0]]||d[s[0]]instanceof Boolean||(d[s[0]]=new Boolean(d[s[0]])),d[s[0]][s[1]]=n),i.push((n?"":"no-")+s.join("-"))}}(),x=i,E=h.className,j=d._config.classPrefix||"",g&&(E=E.baseVal),d._config.enableJSClass&&(S=new RegExp("(^|\\s)"+j+"no-js(\\s|$)"),E=E.replace(S,"$1"+j+"js$2")),d._config.enableClasses&&(E+=" "+j+x.join(" "+j),g?h.className.baseVal=E:h.className=E),delete t.addTest,delete t.addAsyncTest;for(var k=0;k<d._q.length;k++)d._q[k]();a.Modernizr=d}(window,document);var c={_current:0,getNew:function(){return this._current++,this._current}};function i(e){console.log(e),jQuery.ajax({url:ajax_js_obj.ajax_url,dataType:"json",type:"post",data:{action:"get_progress_bar",parcours:e,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t=e.completed,o=e.percent,n=e.achieved,r=e.episodes_number,s=document.getElementById("progress-text"),a=document.getElementById("checkmark"),c=document.getElementById("bar"),i=document.getElementById("completed"),l=n+" épisode"+(1<n?"s":"")+" terminé"+(1<n?"s":"")+" sur "+r;s.innerHTML=l,1==t?(a.style.display="inline",i.style.opacity=1):(a.style.display="none",i.style.opacity=0),console.log("percent",o),c.style.width=o+"%"},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}function l(e){var t;1==e?((t=document.createElement("div")).setAttribute("id","preloader"),t.innerHTML='<img src="/wp-content/themes/didask/img/loader.gif">',document.body.appendChild(t)):document.getElementById("preloader").remove()}function d(e){var t=document.getElementById("overlay"),o=document.querySelector(".scale");!0===e?(t.classList.add("show"),t.classList.remove("hide"),o.classList.add("scaleOut"),o.classList.remove("scaleIn")):(t.classList.remove("show"),t.classList.add("hide"),o.classList.add("scaleIn"),o.classList.remove("scaleOut"))}function u(e,t){return Array.prototype.indexOf.call(t,e)}function _(){var e=document.querySelectorAll(".episode-item");document.querySelectorAll(".content-episode-container").forEach(function(e){e.style.display="none"});var t=document.querySelector(".episodes-list .content-episode-container");null!=t&&t.remove(),e.forEach(function(e){e.classList.remove("selected"),e.style.opacity=1})}function b(e,a,t){jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){d(!0),l(!0)},dataType:"json",type:"post",data:{item_index:e,action:"save_tracking",episode:t,parcours:a,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,o,n,r,s;1===e.insert&&(console.log("response.ok"),d(!1),l(!1),t=e.id_episode,o=document.querySelector("[data-episode_saved = '"+t+"']"),n=document.querySelector("[data-episode = '"+t+"']").querySelector(".checkbox-discover"),r=e.texts,o.innerHTML='<div class="text-uppercase pb-2 success">'+r.text_on_cancel_btn+'</div><div ><a href="#" class="cancel-track">'+r.text_cancel_btn+"</a></div>",n.querySelector("input").checked=!0,n.querySelector(".text-label").innerHTML="Terminé",1==e.completed&&1==e.principal&&(console.log("secondaire ok"),(s=document.getElementById("parcours-secondaire")).style.display="block",i(a),s.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})))},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}function x(e,s,t){jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){d(!0),l(!0)},dataType:"json",type:"post",data:{item_index:e,action:"cancel_tracking",episode:t,parcours:s,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,o,n,r;1===e.update&&(console.log("update.ok"),d(!1),l(!1),t=e.id_episode,o=document.querySelector("[data-episode_saved = '"+t+"']"),n=document.querySelector("[data-episode = '"+t+"']").querySelector(".checkbox-discover"),r=e.texts,o.innerHTML='<div class="text-uppercase pb-2">'+r.activite_complete+'</div><div class="default-btn btn-invert"><a href="/" class="track-btn">'+r.texte_save_button+"</a></div>",n.querySelector("input").checked=!1,n.querySelector(".text-label").innerHTML="A réaliser",0==e.completed&&(document.querySelector(".wrapper").style.paddingBottom=180,document.getElementById("parcours-secondaire").style.display="none"),i(s))},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}function S(e,t){var o,n,r=e[t].cloneNode(!0),s=r.querySelector(".save-section");return r.style.display="block",s&&(s.style.opacity=0,o=s.dataset.episode_saved,n=s.dataset.parcours,jQuery.ajax({url:ajax_js_obj.ajax_url,dataType:"json",type:"post",data:{action:"get_episode_status",parcours:n,episode:o,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t=e.texts,o=e.id_episode,n=document.querySelector("[data-episode_saved = '"+o+"']");document.querySelector("[data-episode = '"+o+"']");1==e.status?n.innerHTML='<div class="text-uppercase pb-2 success">'+t.text_on_cancel_btn+'</div><div><a href="#" class="cancel-track">'+t.text_cancel_btn+"</a></div>":n.innerHTML='<div class="text-uppercase pb-2">'+t.activite_complete+'</div><div class="default-btn btn-invert"><a href="/" class="track-btn">'+t.texte_save_button+"</a></div>",n.style.opacity=1},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})),r}function p(t,e,o,n){console.log("ar_blocs",o);var r=window.matchMedia("(max-width: 576px)"),s=window.matchMedia("(min-width: 768px)"),a=window.matchMedia("(min-width: 576px)"),c=window.matchMedia("(min-width: 1200px)"),i=4;console.log("resp",s.matches),r.matches&&(i=1),a.matches&&(i=2),s.matches&&(i=3),c.matches&&(i=4);e.childElementCount;var l=[];n.forEach(function(e,t){l.push(t)}),console.log("elements",l);var d=function(e,t){for(var o,n=[],r=0;r<e.length;r+=t)o=e.slice(r,r+t),n.push(o);return n}(l,i),u=function(e,t){if(!e)return[];for(var o=0;o<e.length;o++){var n=e[o].indexOf(t);if(-1<n)return[o,n]}return[]}(d,t),p=u[0],f=u[1];console.log("rows",d),console.log("row",p,"pos_in_row",f);var m=d[p][i-1];console.log("element_to_clone_under",m);e.classList.contains("library");var y,v,h,g=S(o,t);y=g,v=n,h=m+1,e.insertBefore(y,v[h]).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});document.querySelectorAll(".save-section");g.querySelector(".close").addEventListener("click",function(e){_()}),g.querySelector(".save-section").addEventListener("click",function(e){!function(e,t){t.preventDefault();var o=t.target.parentElement.parentElement;if("track-btn"==t.target.className){var n=o.dataset.parcours,r=o.dataset.episode_saved;console.log("track pos",e,"parcours",n,"episode",r),b(e,n,r)}else if("cancel-track"==t.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var s=o.dataset.parcours,a=o.dataset.episode_saved;console.log("cancel pos",e,"parcours",s,"episode",a),x(e,s,a)}}(t,e),attach_close_listener()})}HTMLElement.prototype.pseudoStyle=function(e,t,o){var n="pseudoStyles",r=document.head||document.getElementsByTagName("head")[0],s=document.getElementById(n)||document.createElement("style");s.id=n;var a="pseudoStyle"+c.getNew();return this.className+=" "+a,s.innerHTML+=" ."+a+":"+e+"{"+t+":"+o+"}",r.appendChild(s),this};function n(){jQuery(".colored").matchHeight(),document.querySelectorAll(".scroll-next a").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),t.closest(".section").nextElementSibling.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})})});var e=document.querySelector(".navbar-toggler"),t=document.getElementById("navbarNav"),o=document.getElementById("header-container");e.addEventListener("click",function(e){t.classList.contains("show")?(console.log("close"),o.classList.remove("open")):(o.classList.add("open"),console.log("open"))});var d=document.querySelectorAll(".episode-item");document.querySelectorAll(".content-episode-container"),document.querySelectorAll(".episode-item").forEach(function(l){l.addEventListener("click",function(e){var t,o=l.parentElement,n=o.nextElementSibling,r=o.querySelectorAll(".episode-item"),s=n.querySelectorAll(".content-episode-container");l.classList.contains("ghost")||(_(),t=l,d.forEach(function(e){e!=t&&(e.style.opacity=.5)})),l.classList.add("selected");var a=l.querySelector(".colored"),c=a.dataset.color;a.pseudoStyle("after","border-top-color",c+"!important");var i=u(l,r);console.log("pos",i),console.log("ar_blocs",s),p(i,o,s,r)})}),document.querySelectorAll(".save-section").forEach(function(c){var i=document.querySelectorAll(".save-section");c.addEventListener("click",function(e){if(e.preventDefault(),"track-btn"==e.target.className){console.log("clicked");var t=u(c,i),o=c.dataset.parcours,n=c.dataset.episode_saved;console.log("track pos",t,"parcours",o,"episode",n),b(t,o,n)}else if("cancel-track"==e.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var r=u(c,i),s=c.dataset.parcours,a=c.dataset.episode_saved;console.log("cancel pos",r,"parcours",s,"episode",a),x(r,s,a)}})})}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?n():document.addEventListener("DOMContentLoaded",n)},{}]},{},[1]);
//# sourceMappingURL=scripts.min.js.map
