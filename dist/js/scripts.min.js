!function c(a,s,i){function l(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(d)return d(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[t]={exports:{}};a[t][0].call(r.exports,function(e){return l(a[t][1][e]||e)},r,r.exports,c,a,s,i)}return s[t].exports}for(var d="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,o){"use strict";var s={_current:0,getNew:function(){return this._current++,this._current}};function c(e){var t;1==e?((t=document.createElement("div")).setAttribute("id","preloader"),t.innerHTML='<img src="/wp-content/themes/didask/img/loader.gif">',document.body.appendChild(t)):document.getElementById("preloader").remove()}function a(e){var t=document.getElementById("overlay"),o=document.querySelector(".scale");!0===e?(t.classList.add("show"),t.classList.remove("hide"),o.classList.add("scaleOut"),o.classList.remove("scaleIn")):(t.classList.remove("show"),t.classList.add("hide"),o.classList.add("scaleIn"),o.classList.remove("scaleOut"))}function _(e,t){return Array.prototype.indexOf.call(t,e)}function l(e,t,o){jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){a(!0),c(!0)},dataType:"json",type:"post",data:{item_index:e,action:"save_tracking",episode:o,parcours:t,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,o,n,r;1===e.insert&&(console.log("response.ok"),a(!1),c(!1),t=e.id_episode,o=document.querySelector("[data-episode_saved = '"+t+"']"),n=document.querySelector("[data-episode = '"+t+"']").querySelector(".checkbox-discover"),o.innerHTML='<div class="text-uppercase pb-2 success"><span class="bravo">BRAVO</span>Votre équipe a terminé cet épisode.</div><div ><a href="#" class="cancel-track">Annuler</a></div>',n.querySelector("input").checked=!0,n.querySelector(".text-label").innerHTML="Terminé",1==e.completed&&((r=document.getElementById("parcours-secondaire")).style.display="block",r.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})))},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}function d(e,t,o){jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){a(!0),c(!0)},dataType:"json",type:"post",data:{item_index:e,action:"cancel_tracking",episode:o,parcours:t,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,o,n;1===e.update&&(console.log("update.ok"),a(!1),c(!1),t=e.id_episode,o=document.querySelector("[data-episode_saved = '"+t+"']"),n=document.querySelector("[data-episode = '"+t+"']").querySelector(".checkbox-discover"),o.innerHTML='<div class="text-uppercase pb-2">Vous avez terminé ?</div><div class="default-btn btn-invert"><a href="/" class="track-btn">Cliquez ici pour l`\'enregistrer</a></div>',n.querySelector("input").checked=!1,n.querySelector(".text-label").innerHTML="A découvrir")},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}function q(e,t){t.preventDefault();var o=t.target.parentElement.parentElement;if("track-btn"==t.target.className){var n=o.dataset.parcours,r=o.dataset.episode_saved;console.log("track pos",e,"parcours",n,"episode",r),l(e,n,r)}else if("cancel-track"==t.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var c=o.dataset.parcours,a=o.dataset.episode_saved;console.log("cancel pos",e,"parcours",c,"episode",a),d(e,c,a)}}function k(e,t){var o=e[t].cloneNode(!0);return console.log(o),o.style.display="block",o}function L(e,t,o,n){var r=e.insertBefore(t,o[n]);return r.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),r}HTMLElement.prototype.pseudoStyle=function(e,t,o){var n="pseudoStyles",r=document.head||document.getElementsByTagName("head")[0],c=document.getElementById(n)||document.createElement("style");c.id=n;var a="pseudoStyle"+s.getNew();return this.className+=" "+a,c.innerHTML+=" ."+a+":"+e+"{"+t+":"+o+"}",r.appendChild(c),this};function n(){var b=window.matchMedia("(min-width: 992px)");document.querySelectorAll(".scroll-next a").forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),t.closest(".section").nextElementSibling.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})})});var e=document.querySelector(".navbar-toggler"),t=document.getElementById("navbarNav"),o=document.getElementById("header-container");e.addEventListener("click",function(e){t.classList.contains("show")?(console.log("close"),o.classList.remove("open")):(o.classList.add("open"),console.log("open"))});var E=document.querySelectorAll(".episode-item"),S=document.querySelectorAll(".content-episode-container");document.querySelectorAll(".episode-item").forEach(function(g){g.addEventListener("click",function(e){console.log("resp",b.matches);var t=g.parentElement,o=t.nextElementSibling,n=t.querySelectorAll(".episode-item"),r=o.querySelectorAll(".content-episode-container");!function(e,t){t.forEach(function(e){e.style.display="none"});var o=document.querySelector(".episodes-list .content-episode-container");null!=o&&o.remove(),e.forEach(function(e){e.classList.remove("selected")})}(E,S),g.classList.add("selected");var c=g.querySelector(".colored"),a=c.dataset.color;c.pseudoStyle("after","border-top-color",a+"!important");var s,i,l,d,u,p,m,v,f,y,h=_(g,n);console.log("pos",h),b.matches?(u=h,m=r,v=n,y=(p=t).childElementCount,console.log("count children",y),3<y&&u<3?(L(p,f=k(m,u),v,3),f.querySelector(".save-section").addEventListener("click",function(e){q(u,e)})):m[u].style.display="block"):(i=t,l=n,d=k(r,s=h),L(i,d,l,s+1),d.querySelector(".save-section").addEventListener("click",function(e){q(s,e)}))})}),document.querySelectorAll(".save-section").forEach(function(s){var i=document.querySelectorAll(".save-section");s.addEventListener("click",function(e){if(e.preventDefault(),"track-btn"==e.target.className){var t=_(s,i),o=s.dataset.parcours,n=s.dataset.episode_saved;console.log("track pos",t,"parcours",o,"episode",n),l(t,o,n)}else if("cancel-track"==e.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var r=_(s,i),c=s.dataset.parcours,a=s.dataset.episode_saved;console.log("cancel pos",r,"parcours",c,"episode",a),d(r,c,a)}})})}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?n():document.addEventListener("DOMContentLoaded",n)},{}]},{},[1]);
//# sourceMappingURL=scripts.min.js.map
