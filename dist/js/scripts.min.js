!function c(a,s,i){function l(t,e){if(!s[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var n=s[t]={exports:{}};a[t][0].call(n.exports,function(e){return l(a[t][1][e]||e)},n,n.exports,c,a,s,i)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({1:[function(e,t,r){"use strict";var s={_current:0,getNew:function(){return this._current++,this._current}};function v(e){var t;1==e?((t=document.createElement("div")).setAttribute("id","preloader"),t.innerHTML='<img src="/wp-content/themes/didask/img/loader.gif">',document.body.appendChild(t)):document.getElementById("preloader").remove()}function y(e){var t=document.getElementById("overlay"),r=document.querySelector(".scale");!0===e?(t.classList.add("show"),t.classList.remove("hide"),r.classList.add("scaleOut"),r.classList.remove("scaleIn")):(t.classList.remove("show"),t.classList.add("hide"),r.classList.add("scaleIn"),r.classList.remove("scaleOut"))}function h(e,t){return Array.prototype.indexOf.call(t,e)}function i(e,t){t.forEach(function(e){e.style.display="none"}),e.forEach(function(e){e.classList.remove("selected")})}HTMLElement.prototype.pseudoStyle=function(e,t,r){var o="pseudoStyles",n=document.head||document.getElementsByTagName("head")[0],c=document.getElementById(o)||document.createElement("style");c.id=o;var a="pseudoStyle"+s.getNew();return this.className+=" "+a,c.innerHTML+=" ."+a+":"+e+"{"+t+":"+r+"}",n.appendChild(c),this};function o(){var c=document.querySelectorAll(".episode-item"),a=document.querySelectorAll(".content-episode-container"),s=document.querySelector(".episodes-list");document.querySelectorAll(".episode-item").forEach(function(n){n.addEventListener("click",function(e){i(c,a),n.classList.add("selected");var t=n.querySelector(".colored"),r=t.dataset.color;t.pseudoStyle("after","border-top-color",r+"!important");var o=h(n,c);a[o].style.display="block",o<3&&s.insertBefore(a[o],c[3])})}),document.querySelectorAll(".save-section").forEach(function(p){var f=document.querySelectorAll(".save-section");p.addEventListener("click",function(e){if(e.preventDefault(),"track-btn"==e.target.className){console.log(p);var t=h(p,f),r=p.dataset.parcours,o=p.dataset.episode;u=t,d=r,m=o,jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){y(!0),v(!0)},dataType:"json",type:"post",data:{item_index:u,action:"save_tracking",episode:m,parcours:d,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,r,o,n,c;1===e.insert&&(y(!1),v(!1),t=e.index,r=document.querySelectorAll(".save-section"),o=document.querySelectorAll(".episode-item"),r[t].innerHTML='<div class="text-uppercase pb-2 success"><span class="bravo">BRAVO</span>Votre équipe a terminé cet épisode.</div><div ><a href="#" class="cancel-track">Annuler</a></div>',(n=o[t].querySelector(".checkbox-discover")).querySelector("input").checked=!0,n.querySelector("label").innerHTML="Terminé",1==e.completed&&((c=document.getElementById("parcours-secondaire")).style.display="block",c.scrollIntoView()))},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}else if("cancel-track"==e.target.className){if(!confirm("Etes-vous sûr de vouloir annuler ?"))return;var n=h(p,f),c=p.dataset.parcours,a=p.dataset.episode;console.log(c,a),s=n,i=c,l=a,jQuery.ajax({url:ajax_js_obj.ajax_url,beforeSend:function(){y(!0),v(!0)},dataType:"json",type:"post",data:{item_index:s,action:"cancel_tracking",episode:l,parcours:i,submitted_nonce:ajax_js_obj.the_nonce},success:function(e){var t,r,o,n;console.log(e),1===e.update&&(y(!1),v(!1),t=e.index,r=document.querySelectorAll(".save-section"),o=document.querySelectorAll(".episode-item"),r[t].innerHTML='<div class="text-uppercase pb-2">Vous avez terminé ?</div><div class="default-btn btn-invert"><a href="/" class="track-btn">Cliquez ici pour l`\'enregistrer</a></div>',(n=o[t].querySelector(".checkbox-discover")).querySelector("input").checked=!0,n.querySelector("label").innerHTML="Terminé")},complete:function(){},error:function(e){console.log("Error retrieving the information: "+e.status+" "+e.statusText)}})}var s,i,l,u,d,m})})}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?o():document.addEventListener("DOMContentLoaded",o)},{}]},{},[1]);
//# sourceMappingURL=scripts.min.js.map
